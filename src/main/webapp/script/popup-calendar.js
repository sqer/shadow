YUI.add("popup-calendar",function(b){var a="input",c="tabindex";b.PopupCalendar=b.Base.create("popup-calendar",b.Calendar,[b.WidgetPosition,b.WidgetPositionAlign,b.WidgetAutohide],{initializer:function(){b.log("initializer","info",this.name);this._bindEvents();this.setHideOn();this.set("tabIndex",0);if(this.get("autoTabIndexFormElements")){this.get(a).ancestor("form").all(a).setAttribute(c,"1")}},_bindEvents:function(){b.log("_bindEvents","info",this.name);var d=this.get(a);d.on("focus",this.showCalendar,this);d.on("keydown",this.testKey,this);this.on("selectionChange",this._emitDate,this);this.after("autoFocusOnFieldFocusChange",this.setHideOn,this)},_setPopupTabindex:function(){b.log("_setPopupTabindex","info",this.name);var d=this.get(a),e=d.getAttribute(c);this.get(a).insert(this.get("boundingBox"),"after");if(e===""){e="0"}this.get("boundingBox").setAttribute(c,e)},_emitDate:function(d){b.log("_emitDate","info",this.name);this.fire("dateSelected",d);this.hideCalendar()},_testKey:function(d){b.log("_testKey","info",this.name);if(d.keyCode===9){this.hideCalendar()}},destructor:function(){b.log("destructor","info",this.name);this.get(a).detachAll()},setHideOn:function(){b.log("_setHideOn","info",this.name);var d=[{eventName:"mousedownoutside"},{eventName:"key",node:b.one("document"),keyCode:"esc"}];if(this.get("autoFocusOnFieldFocus")){d.push({eventName:"keyupoutside"})}else{d.push({eventName:"keydownoutside"})}this.set("hideOn",d)},showCalendar:function(){b.log("showCalendar","info",this.name);if(this.get("rendered")){this.show()}else{this.render();this._setPopupTabindex()}if(this.get("autoFocusOnFieldFocus")){this.focus()}},hideCalendar:function(){b.log("hideCalendar","info",this.name);this.hide()}},{ATTRS:{input:{value:null},autoFocusOnFieldFocus:{value:false},autoTabIndexFormElements:{value:false}}})},"@VERSION@",{requires:["calendar","widget-position","widget-position-align","widget-autohide"]});